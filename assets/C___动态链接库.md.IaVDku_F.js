import{_ as s,c as i,o as a,a3 as n}from"./chunks/framework.Bt9cqVig.js";const l="/Blog/assets/image-20240130092352504.C2oHhRQ6.png",p="/Blog/assets/image-20240130092645917.DE-eQ3F8.png",e="/Blog/assets/image-20240130092927729.pnh6Rkbb.png",t="/Blog/assets/image-20240130093010334.DVuUV7Ll.png",h="/Blog/assets/image-20240130093052145.Bl8cfzMA.png",k="/Blog/assets/image-20240130093231182.CE1T9yRN.png",r="/Blog/assets/image-20240130093708027.Cp26gpLf.png",d="/Blog/assets/image-20240131093022827.5Bsdtv1Q.png",E="/Blog/assets/image-20240131093031677.DU_mQOmo.png",c="/Blog/assets/image-20240131093105630.FeNfbEDF.png",g="/Blog/assets/image-20240130094658386.Cw5ofg9n.png",b="/Blog/assets/image-20240131104221979.oUajlFY7.png",m="/Blog/assets/image-20240131104208892.DIIpMACU.png",y="/Blog/assets/image-20240131104321645.UCq3EKzr.png",u="/Blog/assets/image-20240131113313958.BOzjJUbH.png",A="/Blog/assets/image-20240131094022427.BDVi8nG2.png",o="/Blog/assets/image-20240131094051605.D931jFRk.png",F="/Blog/assets/image-20240201152030198.fSdjfx3W.png",D="data:image/png;base64,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",B="/Blog/assets/image-20240201152152065.FhgC3VpU.png",C="/Blog/assets/image-20240201152321297.BHMyiE5q.png",v="/Blog/assets/image-20240201152347732.D3Xu8xKP.png",q="/Blog/assets/image-20240201152428794.X_KOdM1i.png",f="/Blog/assets/image-20240201152504595.DpRdqMam.png",_="/Blog/assets/image-20240201152520157.BF6buaFL.png",L="/Blog/assets/image-20240201152540082.BR-3d5RM.png",x="/Blog/assets/image-20240201152642794.BEx8E-Aq.png",P="/Blog/assets/image-20240201152934356.S3UtF52p.png",T="/Blog/assets/image-20240201153011914.BTZknKeV.png",Q="/Blog/assets/image-20240201153124554.BtcM2wsQ.png",M="/Blog/assets/image-20240201153142165.BYiWntJ2.png",z=JSON.parse('{"title":"动态链接库","description":"","frontmatter":{},"headers":[],"relativePath":"C++/动态链接库.md","filePath":"C++/动态链接库.md"}'),O={name:"C++/动态链接库.md"},S=n(`<h1 id="动态链接库" tabindex="-1">动态链接库 <a class="header-anchor" href="#动态链接库" aria-label="Permalink to &quot;动态链接库&quot;">​</a></h1><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>本文介绍动态链接库的概念、作用和使用方法。分别详细举例在QT、visual stdio、g++中导出/导入动态链接库的方法。</p></div><h2 id="lib是什么" tabindex="-1">lib是什么 <a class="header-anchor" href="#lib是什么" aria-label="Permalink to &quot;lib是什么&quot;">​</a></h2><p>你有一台台式机 有一天你发现配置不够了要换显卡 你得把电脑都拆了 拆下旧显卡 换上新显卡 再重新组装。</p><p>你有一个项目，里面有一个lib， 有一天出问题了 排查发现是这个lib里面的代码有问题， 你得换新的lib 然后重新编译整个项目 才能重新运行。</p><h2 id="dll是什么" tabindex="-1">dll是什么 <a class="header-anchor" href="#dll是什么" aria-label="Permalink to &quot;dll是什么&quot;">​</a></h2><p>你有一台台式机，它留了个外接显卡接口，你有一天想玩3A， 发现显卡带不动了，你关机，换个新的显卡，再开机，打开3A发现能玩了。</p><p>你有一个项目，它启动时读取目录下的某个dll，然后正常运行。有一天需要升级这个dll，把项目进程关了，换上新的dll，再重新打开项目运行即可。</p><h1 id="测试代码" tabindex="-1">测试代码 <a class="header-anchor" href="#测试代码" aria-label="Permalink to &quot;测试代码&quot;">​</a></h1><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-FEJoj" id="tab-mQ2BDYG" checked><label for="tab-mQ2BDYG">lib.h</label><input type="radio" name="group-FEJoj" id="tab-zBeee8A"><label for="tab-zBeee8A">lib.cpp</label><input type="radio" name="group-FEJoj" id="tab-hzM39Os"><label for="tab-hzM39Os">main.cpp</label></div><div class="blocks"><div class="language-cpp vp-adaptive-theme active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#ifndef</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EXAMPLE_H</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EXAMPLE_H</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> myFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#endif</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-cpp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;lib.h&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &lt;iostream&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> myFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    std</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::cout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Hello from myFunction!&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> std</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::endl;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-cpp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&lt;iostream&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;lib.h&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> std</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(){</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    myFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cout</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></div></div><h1 id="g" tabindex="-1">g++ <a class="header-anchor" href="#g" aria-label="Permalink to &quot;g++&quot;">​</a></h1><h2 id="直接整体编译" tabindex="-1">直接整体编译 <a class="header-anchor" href="#直接整体编译" aria-label="Permalink to &quot;直接整体编译&quot;">​</a></h2><p>.cpp文件在一块编译</p><p>生成可执行文件</p><p>编译 ：g++ -o m main.cpp lib.cpp</p><p>运行 ：m</p><h2 id="dll" tabindex="-1">dll <a class="header-anchor" href="#dll" aria-label="Permalink to &quot;dll&quot;">​</a></h2><p>编译成dll : g++ -shared lib.cpp -o lib.dll</p><p>链接生成可执行文件： g++ -L. -llib main.cpp -o m</p><p>运行 m.exe</p><p>修改lib.cpp中的函数</p><div class="language-cpp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> myFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    std</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::cout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;修改过后 &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> std</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::endl;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>重新编译dll : g++ -shared lib.cpp -o lib.dll</p><p>运行m.exe 输出 &quot;修改过后 &quot;</p><h2 id="lib" tabindex="-1">lib <a class="header-anchor" href="#lib" aria-label="Permalink to &quot;lib&quot;">​</a></h2><p>编译成lib: g++ -c lib.cpp -o lib.o //-c表示不生成可执行文件 ar rcs liblib.lib lib.o</p><p>此时目录下生成了一个liblib.lib文件</p><p>编译链接静态库 生成可执行文件: g++ -o m main.cpp -L. -lliblib</p><p>-L后面的.表示当前目录</p><p>-l 后面跟具体的库名 去掉后缀.lib</p><p>运行 m.exe</p><p><em>如果你没有显式地使用这些导出关键字，仍然可能能够创建工作的动态链接库。这是因为编译器和链接器有一些默认规则。</em></p><p>在C++中，导出关键字通常是指在Windows平台上使用的 <code>__declspec(dllexport)</code> 和 <code>__declspec(dllimport)</code>。</p><h1 id="visual-stdio-msvc" tabindex="-1">visual stdio(msvc) <a class="header-anchor" href="#visual-stdio-msvc" aria-label="Permalink to &quot;visual stdio(msvc)&quot;">​</a></h1><h2 id="直接整体编译-1" tabindex="-1">直接整体编译 <a class="header-anchor" href="#直接整体编译-1" aria-label="Permalink to &quot;直接整体编译&quot;">​</a></h2><p><img src="`+l+'" alt="image-20240130092352504"></p><p>没问题</p><h2 id="lib-1" tabindex="-1">lib <a class="header-anchor" href="#lib-1" aria-label="Permalink to &quot;lib&quot;">​</a></h2><p><img src="'+p+'" alt="image-20240130092645917"></p><p>生成得到静态库</p><p><img src="'+e+'" alt="image-20240130092927729"></p><p>加入main文件</p><p>#pragma comment导入静态库 也可以在属性里配置</p><p><img src="'+t+'" alt="image-20240130093010334"></p><p>把我们编译出来的静态库移到main.cpp目录下</p><p><img src="'+h+'" alt="image-20240130093052145"></p><p>删掉项目中的lib.cpp文件 可以运行</p><p><img src="'+k+'" alt="image-20240130093231182"></p><p>总结 使用静态库lib 静态链接生成exe文件 我们只需要给使用者提供.h和.lib文件 不需要提供.cpp文件 这样隐藏了代码的实现细节 但是相对于dll 链接出来的exe文件很大 并且如果某一.cpp改代码 需要重新编译该x.cpp文件变成x.lib 然后替换项目中旧的x.lib 重新整体编译项目 生成可执行文件 所以我们下面换成dll 这样方便</p><h2 id="dll-1" tabindex="-1">dll <a class="header-anchor" href="#dll-1" aria-label="Permalink to &quot;dll&quot;">​</a></h2><p>设置配置类型</p><p><img src="'+r+'" alt="image-20240130093708027"></p><p>标识要导出的函数</p><p><img src="'+d+'" alt="image-20240131093022827"></p><p><img src="'+E+'" alt="image-20240131093031677"></p><p><img src="'+c+'" alt="image-20240131093105630"></p><p>生成项目 在Debug目录里生成dll文件</p><p><img src="'+g+'" alt="image-20240130094658386"></p><h1 id="qt" tabindex="-1">QT <a class="header-anchor" href="#qt" aria-label="Permalink to &quot;QT&quot;">​</a></h1><p>创建个新项目 添加dlla.h dlla.cpp文件</p><p>打开.pro文件</p><p><img src="'+b+'" alt="image-20240131104221979"></p><p><img src="'+m+`" alt="image-20240131104208892"></p><p>dlla.h</p><div class="language-cpp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#ifndef</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DLLA_H</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DLLA_H</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EXPROT</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#ifdef</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EXPROT</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">     #define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DLL_EXPROT</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> __declspec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dllexport)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#else</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">     #define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DLL_EXPROT</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> __declspec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dllimport)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#endif</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//注意 如果使用Q_DECL_EXPORT宏  需要include &lt;QObject&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//#ifdef EXPROT</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//     #define DLL_EXPROT Q_DECL_EXPORT</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//#else</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//     #define DLL_EXPROT Q_DECL_EXPORT</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//#endif</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//导出函数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DLL_EXPROT </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">test01</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DLL_EXPROT </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">test02</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DLL_EXPROT </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">test03</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//想要直接从dll里获取类信息 进而构造一个实例 很困难</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DLL_EXPROT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DllA  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//如果使用静态库 一定要导出这个类 不然就“无法解析外部符号”</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    DllA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    DllA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 我们用一个工厂函数 来读取dll构造类实例   不同构造函数例子</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">extern</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;C&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DLL_EXPROT DllA</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Instance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">extern</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;C&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DLL_EXPROT DllA</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Instance2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#endif</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // DLLA_H</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><p>dlla.cpp</p><div class="language-cpp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;dlla.h&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DllA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DllA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DllA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DllA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> test01</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> test02</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> test03</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DllA</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Instance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DllA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DllA</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Instance2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> i</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DllA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>构建以后 可以在导出目录看到被导出的.lib和.dll</p><p><img src="`+y+`" alt="image-20240131104321645"></p><h2 id="使用lib" tabindex="-1">使用lib <a class="header-anchor" href="#使用lib" aria-label="Permalink to &quot;使用lib&quot;">​</a></h2><p>use_dll_lib.pro</p><div class="language-cmake vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">cmake</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">QT -= gui</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CONFIG += c++11 console</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CONFIG -= app_bundle</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">INCLUDEPATH += E:/Learning/QT/code/dll_lib</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#LIBS += -lE:/Learning/QT/code/use_dll_lib/dll_lib</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DEFINES += QT_DEPRECATED_WARNINGS</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SOURCES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> += \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        main.cpp</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qnx: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = /tmp/$</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">\${TARGET}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/bin</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">unix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:!android: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = /opt/$</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">\${TARGET}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/bin</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">!isEmpty(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">): INSTALLS += </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">target</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>main.cpp</p><div class="language-c++ vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c++</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &lt;QCoreApplication&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &lt;dlla.h&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#pragma</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> comment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lib</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;E:/Learning/QT/code/use_dll_lib/dll_lib.lib&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> argc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">char</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">argv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    QCoreApplication </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(argc, argv);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    DllA dlla;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">exec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="使用dll" tabindex="-1">使用dll <a class="header-anchor" href="#使用dll" aria-label="Permalink to &quot;使用dll&quot;">​</a></h2><p>main.cpp</p><div class="language-c++ vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c++</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &lt;QCoreApplication&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &lt;dlla.h&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &lt;QLibrary&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &lt;iostream&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> argc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">char</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">argv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    QCoreApplication </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(argc, argv);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //加载dll</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    QLibrary</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dll </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> QLibrary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;E:/Learning/QT/code/use_dll_lib/dll_lib.dll&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    DllA</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dlla;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //dll存在 并且加载成功</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dll </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dll-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()){</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //定义函数指针</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        typedef</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DllA</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (*MyPointer)(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> i</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        MyPointer instance2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (MyPointer)dll-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Instance2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(instance2){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            dlla </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> instance2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dll;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">exec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>输出</p><p><img src="`+u+'" alt="image-20240131113313958"></p><p>dumpbin工具的使用</p><p>如果查看a.dll库中包含哪些函数，可以使用:dumpbin /exports a.dll &gt;1.txt</p><p>如果查看b.exe中加载了哪些动态库，可以使用：dumpbin /imports b.exe &gt;2.txt</p><p>如果查看c.lib中包含哪些函数，可以使用:dumpbin /all /rawdata:none c.lib &gt;3.txt</p><p>如果查看d.obj中包含哪些函数，可以使用：dumpbin /all /rawdata:none d.obj &gt;4.txt</p><h1 id="用dumpbin查看dll文件" tabindex="-1">用dumpbin查看dll文件 <a class="header-anchor" href="#用dumpbin查看dll文件" aria-label="Permalink to &quot;用dumpbin查看dll文件&quot;">​</a></h1><p>新建一个项目, 新建一个 main.cpp文件 导入相关.h文件</p><p>打开dumpbin查看被MSVC修饰过的函数名</p><p>dumpbin可以在visual stdio目录下找到</p><p>例如我的C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\\VC\\Tools\\MSVC\\14.29.30133\\bin\\HostX64\\x64</p><p>打开cmd</p><p>dumpbin.exe /exports 你的dll路径.dll</p><p><img src="'+A+'" alt="image-20240131094022427"></p><p>回车 可以看到刚刚导出后 被msvc修饰的函数名 和类名</p><p><img src="'+o+`" alt="image-20240131094051605"></p><h1 id="c-程序加载导出的dll" tabindex="-1">C++程序加载导出的dll <a class="header-anchor" href="#c-程序加载导出的dll" aria-label="Permalink to &quot;C++程序加载导出的dll&quot;">​</a></h1><div class="language-cpp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &lt;iostream&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &lt;Windows.h&gt;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          //使用函数和某些特殊变量</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;lib2.h&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 包含你的DLL中类的头文件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &lt;functional&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> std</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> char*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dllname </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;C:/Users/Administrator/Desktop/dll/ConsoleApplication1/x64/Debug/ddq.dll&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 加载.dll</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    HMODULE hDLL </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> LoadLibrary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dllname); </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (hDLL </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        typedef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (*FUN)();</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //定义一个函数指针，确定调用函数的形参</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        FUN fp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FUN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetProcAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(hDLL, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;?myFunction@@YAXXZ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //填入被修饰过的函数名</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (fp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            fp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        typedef</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lib2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(*Class)();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Class cla </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetProcAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(hDLL, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Instance&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //继续做，不要问</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (cla)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            lib2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> plugin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cla</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//相当于Instance()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            plugin-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            std</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::cout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;asd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        FreeLibrary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(hDLL);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    else</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        cout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Can not find2: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dllname;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><p>补充说明 extern &quot;C&quot; 可以让被导出的函数 函数名不被编译器修饰</p><h1 id="动态库实战" tabindex="-1">动态库实战 <a class="header-anchor" href="#动态库实战" aria-label="Permalink to &quot;动态库实战&quot;">​</a></h1><div class="tip custom-block"><p class="custom-block-title">visual stdio 与 QT</p><p>不安装vs的qt插件，使用visual stdio 调用QT的API来写QT程序</p></div><p>创建一个vs项目 创一个main.cpp 写上这串代码</p><div class="language-cpp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &lt;iostream&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;QtCore/qdebug.h&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;QtWidgets/qapplication.h&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;QtWidgets/qwidget.h&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> argc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">char*</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> argv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    QApplication </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(argc, argv);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    QWidget aa;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    aa.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">show</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    qDebug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;adsa&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    std</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::cout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Hello World!</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    a.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">exec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>右键熟悉 去c++中的附加包含目录里配置.h文件的路径</p><p><img src="`+F+'" alt="image-20240201152030198"></p><p>找到你QT安装目录下 msvc套件里的include 目的是让vs能找到.h文件</p><p><img src="'+D+'" alt="image-20240201152111953"></p><p>接下来我们静态链接.lib文件 找到lib目录</p><p><img src="'+B+'" alt="image-20240201152152065"></p><p>在该目录打开cmd</p><p>输入dir /s /b *.lib 找到该目录下所有的.lib文件</p><p><img src="'+C+'" alt="image-20240201152321297"></p><p><img src="'+v+'" alt="image-20240201152347732"></p><p>把这串lib的路径 配置到附加依赖项</p><p><img src="'+q+'" alt="image-20240201152428794"></p><p>生成成功</p><p><img src="'+f+'" alt="image-20240201152504595"></p><p>运行 发现找不到dll文件</p><p><img src="'+_+'" alt="image-20240201152520157"></p><p>原因是</p><p><img src="'+L+'" alt="image-20240201152540082"></p><p>所以我们到msvc的bin目录下找到Qt5Core.dll文件 复制到你生成的可执行文件exe目录下</p><p>或者你也可以把这个bin目录配到环境变量里（更方便）</p><p><img src="'+x+'" alt="image-20240201152642794"></p><p>还有一步 就是把这个文件夹 也拷贝到你的exe所在目录下</p><p><img src="'+P+'" alt="image-20240201152934356"></p><p>里边也是dll 或者你也可以配环境变量 随你</p><p>当前目录</p><p><img src="'+T+'" alt="image-20240201153011914"></p><p>反正缺什么你就去qt安装目录里拷什么 或者配环境变量 就这么简单</p><p><img src="'+Q+'" alt="image-20240201153124554"></p><p>运行结果</p><p><img src="'+M+'" alt="image-20240201153142165"></p><p>通过这篇文章 你应该对dll lib 和如何导入第三方库比较熟悉了</p>',132),X=[S];function R(N,V,w,U,H,I){return a(),i("div",null,X)}const J=s(O,[["render",R]]);export{z as __pageData,J as default};
